// Dean Sir Office Code

#include <IRsend.h>  // IR Remote ESP8266 library
#include <DHT.h>     // DHT11 library

// DHT11 setup
#define DHTPIN 14  // NodeMCU pin D5
#define DHTTYPE DHT11
DHT dht(DHTPIN, DHTTYPE);

// IR LED setup
#define IR_LED 12  // IR LED pin D6
IRsend irsend(IR_LED);

// Desired temperature
#define Desired_temperature 27

// Decoded IR signals (fill these with actual raw codes from your remote)
uint16_t ACoff[] = { 3440, 1530, 532, 300, 528, 300, 524, 1130, 520, 310, 518, 1138, 492, 338, 490, 340, 482, 376, 424, 1202, 452, 1228, 426, 404, 422, 408, 418, 408, 420, 1238, 418, 1238, 418, 410, 418, 410, 420, 408, 418, 410, 418, 410, 418, 410, 418, 410, 418, 410, 418, 412, 416, 412, 418, 410, 416, 412, 416, 412, 418, 1240, 416, 412, 418, 410, 418, 412, 416, 412, 418, 434, 394, 434, 394, 434, 394, 1262, 394, 434, 394, 434, 394, 434, 394, 434, 392, 1264, 394, 434, 394, 436, 392, 436, 394, 434, 394, 436, 394, 436, 392, 1264, 392, 436, 392, 1264, 394, 1262, 394, 1264, 392, 1264, 394, 1264, 392, 1264, 392 };
uint16_t ACon[] = {3424, 1548,  520, 310,  520, 330,  496, 1140,  516, 334,  494, 1140,  518, 334,  468, 360,  462, 366,  456, 1200,  426, 1232,  422, 434,  394, 412,  416, 412,  416, 1240,  416, 1242,  416, 412,  416, 412,  416, 412,  416, 412,  418, 412,  416, 414,  416, 412,  416, 412,  416, 414,  416, 412,  414, 414,  416, 414,  416, 414,  416, 1242,  414, 414,  416, 414,  416, 412,  416, 412,  416, 414,  414, 436,  394, 414,  414, 1244,  414, 436,  392, 414,  416, 434,  394, 436,  394, 1264,  394, 1262,  394, 1266,  392, 1266,  392, 1264,  392, 1266,  392, 1264,  392, 1264,  394, 434,  392, 436,  392, 1264,  392, 436,  394, 436,  392, 436,  392, 436,  392, 438,  390, 436,  394, 436,  392, 438,  392, 1266,  392, 1264,  394, 436,  392, 436,  392, 1266,  394, 436,  392, 436,  392, 436,  392, 436,  392, 436,  392, 436,  392, 1266,  392, 436,  392, 436,  392, 436,  392, 436,  392, 436,  392, 438,  392, 438,  392, 436,  392, 436,  392, 438,  392, 436,  392, 438,  392, 438,  392, 436,  390, 438,  392, 436,  392, 438,  390, 438,  392, 438,  392, 438,  392, 438,  390, 438,  390, 438,  390, 438,  390, 438,  392, 438,  390, 438,  390, 438,  392, 436,  392, 438,  390, 438,  392, 438,  390, 438,  392, 438,  392, 438,  390, 438,  392, 436,  392, 438,  390, 438,  392, 438,  390, 438,  390, 438,  390, 438,  392, 438,  390, 438,  392, 1266,  390, 438,  390, 438,  392, 1268,  390, 1268,  390, 1266,  390, 1266,  390, 438,  390, 1268,  390, 438,  390, 440,  390};
uint16_t Temp23[] = { 3392, 1576, 494, 340, 492, 334, 494, 1156, 500, 330, 498, 1154, 502, 328, 500, 328, 468, 360, 456, 1198, 430, 1228, 428, 430, 396, 410, 418, 410, 418, 1238, 418, 1238, 418, 410, 418, 412, 418, 410, 418, 410, 418, 410, 418, 410, 418, 410, 418, 410, 416, 412, 416, 410, 416, 412, 416, 410, 418, 410, 416, 1240, 418, 410, 418, 432, 396, 410, 416, 434, 394, 434, 394, 432, 396, 432, 396, 1260, 396, 432, 396, 430, 398, 432, 396, 432, 396, 1260, 396, 1260, 396, 1260, 396, 1260, 396, 1262, 394, 1262, 394, 1260, 396, 1260, 396, 432, 396, 434, 394, 1262, 396, 432, 396, 432, 396, 432, 394, 434, 396, 432, 396, 432, 396, 434, 394, 432, 394, 1262, 394, 1262, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 396, 432, 394, 1260, 394, 1260, 396, 1262, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 436, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 392, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 392, 436, 392, 434, 394, 434, 394, 434, 392, 436, 394, 434, 394, 438, 390, 436, 392, 436, 392, 436, 392, 434, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 1264, 392, 436, 392, 436, 390, 438, 392, 436, 392, 438, 390, 436, 392, 436, 392, 438, 390, 1266, 390, 438, 390 };
uint16_t Temp24[] = { 3382, 1600, 496, 340, 492, 336, 492, 1156, 500, 332, 498, 1154, 502, 328, 498, 330, 466, 362, 454, 1200, 428, 1226, 428, 430, 396, 410, 418, 410, 418, 1238, 418, 1258, 396, 410, 418, 410, 416, 412, 416, 434, 396, 412, 416, 432, 396, 414, 414, 412, 416, 410, 418, 430, 396, 432, 398, 432, 396, 410, 418, 1260, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 1260, 396, 432, 396, 432, 396, 434, 396, 432, 396, 1260, 396, 1260, 394, 1262, 396, 1260, 394, 1262, 396, 1260, 396, 1260, 396, 1260, 396, 432, 396, 432, 394, 1262, 394, 432, 396, 432, 396, 432, 394, 434, 394, 434, 394, 432, 396, 434, 394, 432, 394, 1262, 396, 1260, 394, 432, 396, 432, 396, 432, 396, 432, 394, 434, 396, 432, 394, 434, 394, 434, 394, 434, 396, 1260, 394, 434, 394, 434, 394, 434, 394, 432, 396, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 392, 434, 396, 434, 392, 434, 394, 434, 394, 434, 394, 434, 394, 436, 392, 436, 392, 434, 392, 434, 394, 434, 392, 436, 392, 436, 392, 436, 394, 436, 392, 436, 392, 436, 392, 434, 394, 436, 392, 436, 392, 436, 392, 436, 392, 434, 392, 438, 392, 434, 394, 434, 392, 436, 392, 436, 392, 438, 390, 436, 392, 436, 392, 1264, 392, 436, 392, 436, 392, 438, 390, 438, 392, 436, 392, 438, 390, 1266, 392, 1264, 392, 436, 390, 438, 390 };
uint16_t Temp25[] = { 3368, 1600, 496, 340, 490, 338, 492, 1154, 500, 332, 496, 1156, 500, 330, 498, 328, 466, 362, 454, 1198, 428, 1226, 426, 430, 396, 410, 418, 410, 418, 1240, 416, 1238, 416, 410, 418, 410, 416, 432, 396, 430, 398, 430, 396, 432, 398, 432, 396, 430, 396, 432, 396, 432, 396, 432, 396, 432, 394, 434, 396, 1260, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 394, 432, 396, 432, 396, 1260, 396, 432, 396, 432, 396, 434, 396, 432, 396, 1260, 396, 1262, 394, 1260, 396, 1262, 396, 1260, 396, 1262, 394, 1262, 394, 1260, 394, 434, 396, 432, 394, 1260, 396, 432, 396, 434, 394, 434, 394, 434, 394, 434, 396, 432, 396, 432, 394, 434, 394, 1262, 394, 1262, 394, 434, 394, 434, 394, 434, 396, 432, 396, 434, 394, 434, 394, 1262, 394, 434, 396, 432, 396, 1260, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 432, 394, 436, 392, 434, 394, 436, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 392, 436, 394, 434, 392, 436, 394, 434, 392, 434, 394, 434, 394, 434, 392, 436, 394, 434, 392, 436, 394, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 1264, 392, 436, 392, 436, 392, 436, 390, 438, 390, 436, 390, 438, 392, 436, 390, 1266, 392, 436, 390, 438, 390 };
uint16_t Temp26[] = { 3366, 1602, 466, 394, 462, 342, 490, 1158, 502, 332, 496, 1154, 502, 330, 500, 328, 466, 362, 454, 1198, 430, 1228, 426, 432, 396, 430, 398, 430, 396, 1260, 396, 1260, 396, 432, 396, 434, 394, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 1262, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 394, 1260, 396, 434, 394, 434, 396, 434, 396, 432, 394, 1262, 396, 1262, 396, 1262, 394, 1262, 394, 1262, 396, 1262, 394, 1262, 394, 1262, 396, 434, 396, 432, 396, 1260, 394, 434, 396, 432, 394, 434, 396, 432, 396, 434, 394, 432, 394, 434, 394, 432, 394, 1262, 394, 1262, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 1264, 392, 434, 394, 1262, 394, 434, 394, 436, 392, 434, 394, 436, 394, 434, 394, 434, 392, 436, 394, 434, 394, 434, 394, 436, 392, 434, 394, 436, 392, 434, 394, 434, 394, 436, 392, 436, 392, 436, 392, 434, 392, 436, 392, 436, 392, 436, 392, 436, 394, 436, 392, 436, 392, 436, 394, 436, 392, 436, 392, 438, 392, 436, 392, 436, 392, 438, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 438, 390, 438, 392, 436, 392, 438, 392, 436, 392, 436, 392, 436, 392, 436, 392, 438, 390, 1266, 392, 436, 392, 438, 390, 438, 390, 438, 390, 438, 390, 436, 390, 1266, 390, 438, 392, 438, 390, 438, 390 };
uint16_t Temp27[] = { 3362, 1602, 464, 398, 432, 396, 464, 1160, 498, 336, 494, 1156, 502, 330, 500, 328, 470, 358, 458, 1194, 430, 1226, 428, 430, 396, 432, 394, 432, 396, 1260, 396, 1260, 394, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 394, 434, 396, 432, 394, 432, 394, 434, 394, 434, 394, 432, 394, 432, 396, 1260, 396, 432, 394, 434, 394, 432, 396, 432, 394, 432, 394, 434, 394, 434, 394, 1260, 394, 434, 396, 432, 394, 434, 394, 434, 394, 1264, 394, 1264, 394, 1262, 394, 1262, 394, 1262, 394, 1262, 394, 1262, 392, 1262, 394, 434, 394, 434, 394, 1264, 392, 434, 392, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 432, 394, 1262, 394, 1262, 392, 436, 392, 436, 394, 434, 392, 436, 392, 436, 392, 436, 392, 1264, 392, 1264, 390, 436, 392, 1264, 392, 436, 392, 434, 394, 436, 392, 434, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 438, 390, 436, 392, 436, 392, 436, 392, 436, 392, 434, 392, 436, 392, 436, 392, 436, 392, 438, 390, 436, 392, 436, 392, 436, 390, 436, 392, 436, 392, 434, 392, 436, 392, 436, 392, 436, 392, 436, 390, 436, 392, 436, 392, 436, 392, 436, 392, 436, 390, 436, 390, 438, 390, 438, 390, 438, 390, 436, 390, 438, 390, 436, 390, 438, 390, 436, 390, 436, 392, 1264, 392, 436, 390, 438, 390, 438, 390, 436, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390 };  // PANASONIC C4D3:64800024
uint16_t Temp28[] = { 3382, 1602, 464, 396, 436, 392, 464, 1158, 500, 332, 496, 1154, 500, 330, 502, 328, 464, 364, 456, 1196, 430, 1226, 426, 430, 396, 432, 396, 432, 394, 1262, 394, 1260, 396, 432, 396, 432, 396, 432, 396, 430, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 396, 432, 398, 432, 396, 432, 396, 434, 394, 1262, 394, 434, 396, 432, 396, 432, 396, 432, 396, 434, 396, 432, 396, 432, 398, 1260, 394, 432, 396, 432, 394, 434, 396, 432, 394, 1262, 394, 1262, 394, 1262, 396, 1262, 394, 1262, 394, 1262, 394, 1262, 394, 1262, 394, 434, 394, 434, 394, 1264, 392, 434, 394, 434, 394, 434, 394, 434, 392, 434, 394, 434, 394, 434, 394, 434, 394, 1262, 392, 1264, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 436, 392, 436, 394, 434, 394, 1264, 392, 1264, 392, 434, 394, 434, 392, 436, 394, 434, 394, 434, 394, 436, 392, 436, 394, 434, 394, 436, 392, 434, 394, 434, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 434, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 390, 438, 392, 436, 392, 436, 392, 436, 390, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 390, 438, 390, 1266, 390, 436, 390, 438, 390, 438, 390, 438, 390, 436, 390, 438, 390, 1266, 390, 1266, 390, 1264, 390, 1266, 390 };
uint16_t Temp29[] = { 3418, 1552, 518, 334, 494, 332, 498, 1138, 520, 328, 498, 1156, 502, 328, 500, 328, 466, 362, 458, 1196, 430, 1226, 428, 430, 398, 430, 396, 410, 418, 1238, 418, 1238, 418, 410, 418, 410, 418, 412, 418, 410, 418, 410, 416, 412, 416, 412, 418, 410, 418, 412, 418, 410, 416, 410, 418, 410, 416, 418, 412, 1238, 416, 410, 418, 432, 396, 432, 396, 422, 406, 432, 396, 432, 396, 432, 394, 1262, 396, 432, 396, 432, 394, 432, 396, 432, 396, 1262, 394, 1262, 396, 1260, 396, 1262, 394, 1262, 396, 1262, 394, 1264, 394, 1262, 394, 432, 396, 434, 394, 1262, 394, 434, 394, 434, 396, 432, 396, 434, 394, 432, 396, 434, 394, 434, 394, 434, 396, 1260, 394, 1262, 394, 434, 394, 432, 396, 434, 394, 434, 394, 434, 394, 434, 394, 1262, 394, 434, 394, 1262, 394, 1262, 394, 434, 396, 432, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 432, 394, 434, 394, 434, 394, 434, 394, 434, 396, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 394, 434, 392, 434, 394, 436, 392, 434, 394, 434, 394, 434, 394, 434, 394, 436, 392, 436, 392, 436, 394, 434, 394, 434, 394, 434, 392, 434, 392, 436, 392, 436, 392, 434, 394, 434, 394, 434, 394, 434, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 1262, 392, 436, 392, 436, 392, 436, 392, 436, 392, 436, 392, 438, 390, 436, 390, 1266, 392, 1264, 392, 1264, 392 };
uint16_t Temp30[] = { 3422, 1546, 518, 312, 518, 332, 496, 1138, 518, 332, 494, 1140, 516, 334, 468, 360, 460, 368, 452, 1200, 426, 1230, 424, 432, 394, 412, 414, 412, 414, 1242, 414, 1242, 414, 412, 414, 414, 414, 414, 416, 412, 416, 414, 414, 412, 414, 414, 414, 414, 414, 414, 414, 414, 414, 414, 414, 414, 416, 412, 414, 1242, 414, 436, 392, 412, 414, 414, 414, 414, 414, 436, 392, 434, 394, 436, 390, 1264, 392, 436, 392, 414, 414, 436, 390, 438, 392, 1264, 390, 1264, 392, 1262, 394, 1262, 390, 1264, 392, 1264, 390, 1264, 390, 1264, 392, 436, 392, 436, 392, 1264, 390, 436, 392, 436, 392, 436, 392, 436, 392, 438, 390, 436, 392, 438, 390, 436, 392, 1264, 392, 1264, 390, 438, 390, 436, 390, 436, 392, 436, 390, 436, 390, 436, 392, 436, 390, 1264, 392, 1264, 390, 1264, 390, 436, 392, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 436, 392, 438, 390, 436, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 436, 390, 438, 390, 438, 390, 438, 390, 438, 390, 436, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 388, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 390, 438, 388, 438, 390, 438, 390, 1266, 390, 440, 388, 438, 388, 440, 388, 440, 388, 438, 390, 438, 390, 1266, 388, 438, 390, 1268, 388, 1268, 390 };


int Measured_temp = 27;
int Measured_Humi;
int AC_Temp;
char temp_error = 2;
int Pev_value;
boolean AC = false;
const uint16_t khz = 38;  // 38kHz carrier frequency

void setup() {
  Serial.begin(9600);
  dht.begin();
  irsend.begin();
}

void loop() {
  // Read temperature and humidity
  Measured_temp = dht.readTemperature() + temp_error;
  Measured_Humi = dht.readHumidity();

  // Print values to Serial Monitor
  Serial.print("Temperature: ");
  Serial.print(Measured_temp);
  Serial.println("C");
  Serial.print("Prev Value: ");
  Serial.print(Pev_value);
  Serial.println("C");
  Serial.print("Humidity: ");
  Serial.print(Measured_Humi);
  Serial.println("%");
  Serial.print("AC Temp: ");
  Serial.println(AC_Temp);
  Serial.println("------------------------");

  delay(3000);

  if (Measured_temp != Pev_value) {
    if (Measured_temp >= Desired_temperature + 3) // 3 more hot
    {
      irsend.sendRaw(Temp24, sizeof(Temp24) / sizeof(Temp24[0]), khz);
      AC_Temp = 24;
      delay(2000);
    } 
    if (Measured_temp == Desired_temperature + 2) //2 more hot
    {
      irsend.sendRaw(Temp25, sizeof(Temp25) / sizeof(Temp25[0]), khz);
      AC_Temp = 25;
      delay(2000);
    } 
    if (Measured_temp == Desired_temperature + 1) // 1 more hot 
    {
      irsend.sendRaw(Temp26, sizeof(Temp26) / sizeof(Temp26[0]), khz);
      AC_Temp = 26;
      delay(2000);  
    }
    if (Measured_temp == Desired_temperature) // equal
    {
      irsend.sendRaw(Temp27, sizeof(Temp27) / sizeof(Temp27[0]), khz);
      AC_Temp = 27;
    }
    if (Measured_temp == Desired_temperature - 1) // l cold
    {
      irsend.sendRaw(Temp28, sizeof(Temp28) / sizeof(Temp28[0]), khz);
      AC_Temp = 28;
      delay(2000);
    }
    if (Measured_temp == Desired_temperature - 2) // 2 cold
    {
      irsend.sendRaw(Temp29, sizeof(Temp29) / sizeof(Temp29[0]), khz);
      AC_Temp = 29;
      delay(2000);
    }
    if (Measured_temp <= Desired_temperature - 3) // 3 cold
    {
      irsend.sendRaw(Temp30, sizeof(Temp30) / sizeof(Temp30[0]), khz);
      AC_Temp = 30;
      delay(2000);
    }
  }

  Pev_value = Measured_temp;
}
